<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link href="https://fonts.cdnfonts.com/css/optimus-princeps" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/output.css">
    <link rel="icon" href="assets/images/icon.png">
    <link rel="shortcut icon" href="assets/images/icon.png">
</head>

<body class="font-optimus bg-[#f4f4f4] text-center m-auto">
    <div class="bg-black overflow-hidden shadow-[0px_0px_3px] shadow-white">
        <a class="float-left block text-white text-center static top-auto px-[0.875rem] py-4 hover:bg-[#ddd] hover:text-black"
            href="index.html">
            Login
        </a>
        <a class="float-left block text-white text-center static top-auto px-[0.875rem] py-4 hover:bg-[#ddd] hover:text-black"
            href="register.html">
            Register
        </a>
    </div>

    <div class="flex flex-col items-center gap-4 p-4">
        <h1 class="text-3xl font-semibold">
            Login
        </h1>

        <form
            class="h-fit bg-[#ffffff] border-[1px_solid_#ddd] p-5 max-w-[25rem] my-auto shadow-[0px_0px_10px_rgba(0,0,0,0.1)]"
            id="loginForm">
            <label class="block text-left mb[0.3125rem] font-bold" for="username">
                Username:
            </label>
            <input class="w-[90%] p-[0.625rem] mb-5 border-[1px] border-[#363535a1] rounded-[0.3125rem]" type="text"
                id="username" name="username" required minlength="1">

            <label class="block text-left mb[0.3125rem] font-bold" for="password">
                Password:
            </label>
            <input class="w-[90%] p-[0.625rem] mb-5 border-[1px] border-[#363535a1] rounded-[0.3125rem]" type="password"
                id="password" name="password" required minlength="1">

            <button
                class="leading-none bg-[#333] text-[#fff] p-2 border-none rounded-[0.3125rem] cursor-pointer transition-all duration-[300ms] ease-in hover:bg-[#333]"
                type="button" onclick="login()">
                Login
            </button>
        </form>

        <p class="font-bold">Don't have an account?
            <a class="font-thin underline" href="register.html">
                Register here
            </a>
        </p>
    </div>

</body>

<script>
    function login() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        const loginData = { username: username, password: password };

        fetch("http://localhost:3000/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(loginData)
        })
            .then(res => res.json())
            .then(data => {
                localStorage.setItem("user_id", data.user_id);
                window.location.href = "gallery.html";
            }
            ).catch(err => console.error(err));
    }
</script>

</html>
